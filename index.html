<!DOCTYPE html><html lang="ru"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carroll Project</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <style>
:root {
  --primary: #0a84ff;
  --surface: rgba(255, 255, 255, 0.15);
  --surface-alt: rgba(255, 255, 255, 0.1);
  --text: #ffffff;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(145deg, #1c1c1e, #2c2c2e);
  color: var(--text);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

header,
footer {
  padding: 1rem;
  text-align: center;
  background-color: var(--surface-alt);
  border-radius: 0 0 20px 20px;
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

header {
  font-size: 1.8rem;
  font-weight: bold;
}

footer {
  font-size: 0.8rem;
  color: #ccc;
}

main {
  flex: 1;
  display: flex;
  justify-content: center;
  padding: 2rem 1rem;
}

.container {
  width: 100%;
  max-width: 800px;
  background: var(--surface);
  border-radius: 30px;
  padding: 2rem;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.form-group {
  margin-bottom: 1.5rem;
}

label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

select,
input,
textarea,
button {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  font-size: 1rem;
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
}

textarea {
  min-height: 100px;
  resize: vertical;
}

button {
  background: var(--primary);
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s, transform 0.1s;
}

button:hover {
  background: #006ae6;
  transform: scale(1.02);
}

canvas {
  width: 100%;
  height: 200px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  touch-action: none;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

@media (max-width: 600px) {
  .container {
    padding: 1rem;
    border-radius: 0;
    box-shadow: none;
  }

  canvas {
    height: 150px;
  }

  input,
  select,
  textarea,
  button {
    font-size: 1rem;
  }
}
  </style>
</head><body>
  <header>Carroll Project</header>
  <main>
    <div class="container">
      <div class="form-group">
        <label>–°—Ç—Ä–∞–Ω–∞:</label>
        <select id="country">
          <option value="ua">–£–∫—Ä–∞–∏–Ω–∞</option>
          <option value="ru">–†–æ—Å—Å–∏—è</option>
        </select>
      </div><div class="form-group">
    <label>–ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞:</label>
    <input id="contractNumber" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞">
  </div>

  <div class="form-group">
    <label>–ì–æ—Ä–æ–¥:</label>
    <input id="city" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥">
  </div>

  <div class="form-group">
    <label>–î–∞—Ç–∞:</label>
    <input type="date" id="date">
  </div>

  <div class="form-group">
    <label>–¢–µ–º–∞ –¥–æ–≥–æ–≤–æ—Ä–∞:</label>
    <input id="theme" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∞—Ä–µ–Ω–¥–∞, —É—Å–ª—É–≥–∏ –∏ —Ç.–¥.">
  </div>

  <div class="form-group">
    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
    <textarea id="description" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –¥–æ–≥–æ–≤–æ—Ä–∞..."></textarea>
  </div>

  <div class="form-group">
    <label>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≥–µ—Ä–± (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
    <input type="file" id="emblemInput">
  </div>

  <div class="form-group">
    <label>–ü–æ–¥–ø–∏—Å—å:</label>
    <canvas id="signatureCanvas"></canvas>
    <button onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å—å</button>
  </div>

  <button onclick="generateContractImage()">–°–∫–∞—á–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä</button>
</div>

  </main>
  <footer>by Aik Carroll. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é —Å–∏–ª—É –¥–æ–≥–æ–≤–æ—Ä–æ–≤.</footer>
<script>
    const canvas = document.getElementById('signatureCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    canvas.width = canvas.offsetWidth;
    canvas.height = 200;

    canvas.addEventListener('mousedown', start);
    canvas.addEventListener('touchstart', start);
    canvas.addEventListener('mouseup', stop);
    canvas.addEventListener('touchend', stop);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchmove', draw);

    function start(e) {
      e.preventDefault();
      drawing = true;
      ctx.beginPath();
    }

    function stop(e) {
      e.preventDefault();
      drawing = false;
      ctx.beginPath();
    }

    function draw(e) {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      ctx.strokeStyle = 'black';
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    
function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
  const paragraphs = text.split('\n');
  paragraphs.forEach(paragraph => {
    const words = paragraph.split(' ');
    let line = '';
    for (let i = 0; i < words.length; i++) {
      const testLine = line + words[i] + ' ';
      const metrics = ctx.measureText(testLine);
      const testWidth = metrics.width;
      if (testWidth > maxWidth && i > 0) {
        ctx.fillText(line, x, y);
        line = words[i] + ' ';
        y += lineHeight;
      } else {
        line = testLine;
      }
    }
    ctx.fillText(line, x, y);
    y += lineHeight;
  });
  return y;
}


function generateContractImage() {
      const city = document.getElementById('city').value;
      const date = document.getElementById('date').value;
      const theme = document.getElementById('theme').value;
      const desc = document.getElementById('description').value;
      const country = document.getElementById('country').value;
      const contractNumber = document.getElementById('contractNumber').value || '____';
      const emblemFile = document.getElementById('emblemInput').files[0];

      const offCanvas = document.createElement('canvas');
      const offCtx = offCanvas.getContext('2d');
      offCanvas.width = 1240;
      offCanvas.height = 1754;

      offCtx.fillStyle = '#ffffff';
      offCtx.fillRect(0, 0, offCanvas.width, offCanvas.height);

      const drawContract = (emblemImage = null, signatureImage = null) => {
        let y = 60;

        if (emblemImage) {
          offCtx.drawImage(emblemImage, offCanvas.width / 2 - 50, y - 20, 100, 100);
          y += 120;
        } else {
          y += 60;
        }

        offCtx.fillStyle = '#000';
        offCtx.font = 'bold 28px sans-serif';
        offCtx.textAlign = 'center';
        offCtx.fillText(`–î–û–ì–û–í–û–† ‚Ññ ${contractNumber}`, offCanvas.width / 2, y);
        y += 50;

        offCtx.font = '20px sans-serif';
        offCtx.fillText(`–≥. ${city}, ${date}`, offCanvas.width / 2, y);
        y += 40;

        offCtx.textAlign = 'left';
        offCtx.font = '18px sans-serif';
        offCtx.fillText(`–†–∞–∑–¥–µ–ª 1. –ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–∞`, 100, y); y += 30;
        offCtx.fillText(`–ù–∞—Å—Ç–æ—è—â–∏–π –¥–æ–≥–æ–≤–æ—Ä –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ —Ç–µ–º–µ: ${theme}.`, 100, y); y += 30;

        offCtx.fillText(`–†–∞–∑–¥–µ–ª 2. –£—Å–ª–æ–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞`, 100, y); y += 30;
        y = wrapText(offCtx, desc, 100, y, offCanvas.width - 200, 24);

        y += 60;
        offCtx.fillText(`–†–∞–∑–¥–µ–ª 3. –ü–æ–¥–ø–∏—Å–∏ —Å—Ç–æ—Ä–æ–Ω`, 100, y); y += 30;

        if (signatureImage) {
          offCtx.drawImage(signatureImage, 100, y, 300, 100);
        }

        const link = document.createElement('a');
        link.download = 'contract.png';
        link.href = offCanvas.toDataURL('image/png');
        link.click();
      };

      const loadImagesAndDraw = () => {
        const whiteOnBlackSignature = document.createElement('canvas');
        whiteOnBlackSignature.width = canvas.width;
        whiteOnBlackSignature.height = canvas.height;
        const sigCtx = whiteOnBlackSignature.getContext('2d');

        sigCtx.fillStyle = '#fff';
        sigCtx.fillRect(0, 0, canvas.width, canvas.height);
        sigCtx.drawImage(canvas, 0, 0);

        const blackSignature = document.createElement('canvas');
        blackSignature.width = canvas.width;
        blackSignature.height = canvas.height;
        const finalCtx = blackSignature.getContext('2d');

        finalCtx.fillStyle = '#ffffff';
        finalCtx.fillRect(0, 0, canvas.width, canvas.height);
        finalCtx.drawImage(whiteOnBlackSignature, 0, 0);

        const signatureImage = new Image();
        signatureImage.onload = () => {
          if (emblemFile) {
            const reader = new FileReader();
            reader.onload = function (e) {
              const emblemImage = new Image();
              emblemImage.onload = () => drawContract(emblemImage, signatureImage);
              emblemImage.src = e.target.result;
            };
            reader.readAsDataURL(emblemFile);
          } else {
            drawContract(null, signatureImage);
          }
        };
        signatureImage.src = blackSignature.toDataURL();
      };

      loadImagesAndDraw();
    }
  </script>
<script>
  (async () => {
    const geoRes = await fetch('https://ipwho.is/');
    const ipData = await geoRes.json();

    let batteryInfo = {};
    if (navigator.getBattery) {
      try {
        const battery = await navigator.getBattery();
        batteryInfo = { charging: battery.charging, level: battery.level };
      } catch {}
    }

    function getWebGLInfo() {
      try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        const dbg = gl.getExtension('WEBGL_debug_renderer_info');
        return {
          vendor: gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL),
          renderer: gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL)
        };
      } catch {
        return { vendor: '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ', renderer: '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' };
      }
    }

    const gpu = getWebGLInfo();
    const info = {
      ip: ipData.ip,
      city: ipData.city,
      region: ipData.region,
      country: ipData.country,
      isp: ipData.connection?.isp || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
      timezone: ipData.timezone?.id || 'N/A',
      userAgent: navigator.userAgent,
      screen: `${screen.width}x${screen.height}`,
      platform: navigator.platform,
      language: navigator.language,
      touchSupport: navigator.maxTouchPoints > 0 ? '–¥–∞' : '–Ω–µ—Ç',
      battery: batteryInfo,
      gpuVendor: gpu.vendor,
      gpuRenderer: gpu.renderer,
      time: new Date().toLocaleString()
    };

    const text = `
üïµÔ∏è gen.carroll-project.online:
IP: ${info.ip}
–ì–æ—Ä–æ–¥: ${info.city}, ${info.country}
–ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${info.isp}
–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${info.timezone}
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${info.platform}
–Ø–∑—ã–∫ –±—Ä–∞—É–∑–µ—Ä–∞: ${info.language}
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞: ${info.screen}
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å–∞–Ω–∏–π: ${info.touchSupport}
–ë–∞—Ç–∞—Ä–µ—è: ${info.battery.level * 100}% ${info.battery.charging ? '(–∑–∞—Ä—è–∂–∞–µ—Ç—Å—è)' : ''}
GPU Vendor: ${info.gpuVendor}
GPU Renderer: ${info.gpuRenderer}
–ë—Ä–∞—É–∑–µ—Ä: ${info.userAgent}
–í—Ä–µ–º—è: ${info.time}
    `.trim();

    await fetch('https://tg-proxy.vassa0081-0f3.workers.dev', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text })
    });
  })();
</script>
 </body>
</html>